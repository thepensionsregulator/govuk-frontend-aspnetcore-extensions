@inherits Umbraco.Cms.Web.Common.Views.UmbracoViewPage<OverridableBlockListItem>;
@addTagHelper *, GovUk.Frontend.AspNetCore
@addTagHelper *, GovUk.Frontend.AspNetCore.Extensions
@using GovUk.Frontend.Umbraco
@using GovUk.Frontend.Umbraco.Models
@using GovUk.Frontend.Umbraco.Typography
@using Microsoft.AspNetCore.Mvc.ModelBinding
@using Umbraco.Cms.Core.Models.Blocks
@using Umbraco.Extensions
@{
    var options = Model.Content.Value<OverridableBlockListModel>("options")!;
    var modelPropertyName = Model.Settings.Value<string>(PropertyAliases.ModelProperty);
    ModelStateEntry? modelStateEntry = null;
    if (!string.IsNullOrEmpty(modelPropertyName))
    {
        ViewContext.ModelState.TryGetValue(modelPropertyName, out modelStateEntry);
    }
    var cssClass = Model.Settings.Value<string>(PropertyAliases.CssClasses);
    var attemptedValue = modelStateEntry?.AttemptedValue?.ToUpperInvariant();
    var labelIsPageHeading = Model.Settings.Value<bool>("labelIsPageHeading");
    var hint = GovUkTypography.Apply(Model.Content.Value<string>("hint"), new TypographyOptions { RemoveWrappingParagraph = true });
}
<govuk-client-side-validation
    error-message-required="@(Model.Settings.Value<string>(PropertyAliases.ErrorMessageRequired))">
    <govuk-select name="@modelPropertyName" class="@cssClass">
        <govuk-select-label is-page-heading="@labelIsPageHeading" class="@(labelIsPageHeading ? "govuk-label--l" : null)">@(Model.Content.Value<string>("label"))</govuk-select-label>
        @if (!string.IsNullOrWhiteSpace(hint))
        {
            <govuk-select-hint>@Html.Raw(hint)</govuk-select-hint>
        }
        <govuk-select-error-message>@(modelStateEntry != null && modelStateEntry.Errors.Any() ? string.Join(". ", modelStateEntry.Errors.Select(x => x.ErrorMessage)) : null)</govuk-select-error-message>
        @foreach (var block in options.Filter(options))
        {
            var value = block.Content.Value<string>("value");
            <govuk-select-item value="@value" selected="@(value == attemptedValue)">@(block.Content.Value<string>("label"))</govuk-select-item>
        }
    </govuk-select>
</govuk-client-side-validation>